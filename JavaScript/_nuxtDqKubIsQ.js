import{b as e,f as t,h as i,A as a,a as s,k as r,c as o}from"./B5Cna7aG.js";import{_ as n}from"./CjASlAzE.js";import{b as l,l as c,c as _,u as d,G as m,V as p,W as u,ad as g,X as v,af as y,I as k,a3 as h,H as w,N as f,O as b,L as C,J as L,ac as x,P as F,a5 as H}from"./CfmBXBX3.js";import{g as M}from"./D1BoCpNp.js";import{s as S}from"./BVieWifH.js";const B={class:"game-ticket__container"},j={class:"game-ticket__header"},q={class:"game-ticket__header-title"},D={class:"game-ticket__header-title__container cursor-pointer"},$={key:0,class:"game-ticket__header-title__tags"},N={class:L(["game-ticket__header-title__tags-item"])},Z={class:"game-ticket__body space-y-1"},I={class:"game-ticket__body__information"},V={key:0,class:"game-ticket__body__information-reviews"},A={class:"game-ticket__body__information-reviews__positive"},E={class:"game-ticket__body__information-reviews__negative"},G={class:"game-ticket__body__information-dates"},Q={class:"game-ticket__body__information-dates__release-date"},O={class:"game-ticket__body__information-dates__in-favorite-from"},R={class:"game-ticket__body__bottom"},W={key:0,class:"game-ticket__body__price"},J={key:0,class:"game-ticket__body__price-discount"},P={class:"game-ticket__body__price-old"},T={class:"game-ticket__body__price-coins"},U={key:1,class:"text-[18px] md:text-2xl font-bold flex items-center md:p-2"},X=e({__name:"GameTicket",props:{id:{type:Number,required:!0},image:{type:String,required:!0},title:{type:String,required:!0},tags:{type:Array,default:[]},isHeaderButtonHidden:{type:Boolean,default:!1},discount:{type:[Number,String]},price:{type:[Number,String],default:""},coins:{type:[Number,String],default:""},reviews:{type:Object,required:!0},releaseDate:{type:String,required:!0},inFavorites:{type:Boolean,default:!1},inFavoritesFrom:{type:String,required:!0},slug:{type:String,required:!0},href:{type:String,required:!0},description:{type:String},screenshots:{type:Array},hideHover:{type:Boolean}},setup(e){const{$windowWidth:X}=t(),z=e,K=i(),Y=l(!0),ee=l(z.inFavorites),te=l(z.inFavoritesFrom),ie=a("access_token"),ae=s(),se=r(),re=e=>new Date(e).toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:"numeric"}),oe=c((()=>{var e;return(null==(e=z.releaseDate)?void 0:e.includes("-"))?re(z.releaseDate):z.releaseDate})),ne=()=>{if(X.value<1281)se.push(`/ru-ru/games/${z.slug}`);else if(K.userRegion){if(z.href)return se.push(z.href);se.push(`/ru-ru/games/${z.slug}`)}else ae.openModalQuery({name:"steam-region"})},le=l(!1),ce=z.screenshots.map((e=>e.path_thumbnail)),_e=l(0);let de=null;const me=()=>{_e.value=(_e.value+1)%ce.length},pe=()=>{de&&(clearInterval(de),de=null)};return _(le,(()=>{le.value?(pe(),de=S(me,2e3)):pe()})),(t,i)=>{const a=o,s=n;return d(Y)&&e.image?(m(),p(s,{key:0,class:L(["game-ticket relative cursor-pointer",e.hideHover?"game-ticket--no-hover":""]),to:`/ru-ru/games/${e.slug}`,onMouseover:i[1]||(i[1]=e=>d(X)>1280?le.value=!0:le.value=!1),onMouseleave:i[2]||(i[2]=e=>le.value=!1)},{default:u((()=>{var t;return[g(v(a,{class:"game-ticket__image cursor-pointer game-ticket__image__static",src:e.image,alt:e.image},null,8,["src","alt"]),[[y,!d(le)]]),g(v(a,{class:"game-ticket__image cursor-pointer game-ticket__image__static",src:d(ce)[d(_e)]??null,alt:d(ce)[d(_e)]??""},null,8,["src","alt"]),[[y,d(le)]]),k("div",B,[k("div",j,[k("div",q,[k("div",D,h(e.title),1),e.tags.length?(m(),w("ul",$,[(m(!0),w(f,null,b(e.tags,(e=>(m(),w("li",N,h(e.description),1)))),256))])):C("",!0)]),e.isHeaderButtonHidden?C("",!0):(m(),w("button",{key:0,class:L(["game-ticket__header__button",{"game-ticket__header__button--in-favorites":d(ee)}]),type:"button",onClick:i[0]||(i[0]=x((e=>(async()=>{ie?(await K.setFavoriteGame({projectId:z.id}),ee.value=!ee.value,te.value=new Date):ae.openModalQuery({name:"telegram",noQuery:!0})})()),["stop","prevent"]))},i[3]||(i[3]=[k("svg",{class:"game-ticket__header__button-icon",xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",viewBox:"0 0 17 16",fill:"none"},[k("path",{d:"M5.364 1.68147C5.99092 1.57466 6.63382 1.60989 7.24531 1.78459C7.8568 1.95928 8.42129 2.26898 8.89717 2.69085L8.92337 2.71422L8.94746 2.69297C9.40164 2.29439 9.9356 1.99725 10.5137 1.82136C11.0918 1.64547 11.7008 1.59488 12.3 1.67297L12.4742 1.69847C13.2295 1.82888 13.9355 2.16113 14.5174 2.66001C15.0993 3.1589 15.5354 3.80587 15.7796 4.5324C16.0239 5.25893 16.067 6.03798 15.9046 6.78705C15.7422 7.53612 15.3803 8.22733 14.8571 8.78747L14.7296 8.91852L14.6956 8.94756L9.4185 14.1743C9.29672 14.2949 9.13538 14.3672 8.96437 14.3779C8.79337 14.3885 8.62429 14.3369 8.48846 14.2324L8.42187 14.1743L3.11433 8.9171C2.55207 8.37002 2.1522 7.678 1.95901 6.91766C1.76582 6.15733 1.78685 5.35836 2.01976 4.60924C2.25267 3.86012 2.68838 3.19008 3.27864 2.67333C3.86889 2.15658 4.59066 1.81329 5.364 1.68147Z",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),2))]),k("div",Z,[k("div",I,[k("div",{class:L(["game-ticket__body__information-description",(null==(t=e.reviews)?void 0:t.percent)?"":"game-ticket__body__information-description--full"])},h(e.description),3),e.reviews.percent?(m(),w("div",V,[k("span",{class:L(["game-ticket__body__information-reviews__summary"]),style:F({color:e.reviews.percent>39?e.reviews.percent>69?"#00FF93":"#ffe500":"#FF3E60"})},h(d(M)(e.reviews.percent,e.reviews.positive+e.reviews.negative)),5),d(X)>1280?(m(),w(f,{key:0},[H("|")],64)):C("",!0),k("span",A,[i[4]||(i[4]=k("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[k("path",{d:"M8.59922 4.79995L11.7854 7.83443C12.0254 8.06296 12.4052 8.0537 12.6337 7.81374C12.8622 7.57379 12.853 7.194 12.613 6.96547L8.41301 2.96547C8.18129 2.74478 7.81715 2.74478 7.58543 2.96547L3.38543 6.96547C3.14547 7.194 3.13621 7.57379 3.36474 7.81374C3.59327 8.0537 3.97305 8.06297 4.21301 7.83443L7.39922 4.79995L7.39922 12.6C7.39922 12.9313 7.66785 13.2 7.99922 13.2C8.33059 13.2 8.59922 12.9313 8.59922 12.6L8.59922 4.79995Z",fill:"#00FF93"})],-1)),H(" "+h(e.reviews.positive>1e3?`${Math.round(e.reviews.positive/1e3)}k`:e.reviews.positive),1)]),k("span",E,[i[5]||(i[5]=k("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[k("path",{d:"M8.59922 11.2L11.7854 8.16557C12.0254 7.93704 12.4052 7.9463 12.6337 8.18626C12.8622 8.42621 12.853 8.806 12.613 9.03453L8.41301 13.0345C8.18129 13.2552 7.81715 13.2552 7.58543 13.0345L3.38543 9.03453C3.14547 8.806 3.13621 8.42621 3.36474 8.18626C3.59327 7.9463 3.97305 7.93703 4.21301 8.16557L7.39922 11.2L7.39922 3.40005C7.39922 3.06868 7.66785 2.80005 7.99922 2.80005C8.33059 2.80005 8.59922 3.06868 8.59922 3.40005L8.59922 11.2Z",fill:"#FF3E60"})],-1)),H(" "+h(e.reviews.negative>1e3?`${Math.round(e.reviews.negative/1e3)}k`:e.reviews.negative),1)])])):C("",!0),k("div",G,[k("span",Q," Дата выхода: "+h(oe.value),1),d(ee)&&!e.isHeaderButtonHidden?(m(),w(f,{key:0},[i[6]||(i[6]=H(" | ")),k("span",O," В избранном с "+h(re(d(te))),1)],64)):C("",!0)])]),k("div",R,[0!==e.price?(m(),w("div",W,[e.discount?(m(),w("span",J," -"+h(e.discount)+"% ",1)):C("",!0),k("span",P,h(e.price)+" ₽ ",1),k("span",T,[H(h(e.coins)+" ",1),i[7]||(i[7]=k("svg",{class:"game-ticket__body__price-coins__icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"24",viewBox:"0 0 20 24",fill:"none"},[k("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 21C15.5229 21 20 16.5229 20 11C20 5.47715 15.5229 1 10 1C4.47715 1 0 5.47715 0 11C0 16.5229 4.47715 21 10 21ZM5.92125 16H8.39625V11.7238L12.1637 16H15.175L10.7613 10.8025L14.4875 6.375H11.5175L8.39625 10.0463V6.375H5.92125V16Z",fill:"#FFE500"})],-1))])])):(m(),w("span",U," Бесплатно ")),k("div",{onClick:x(ne,["stop","prevent"]),class:L(0!==e.price?"game-ticket__body__link":"bg-white text-black px-10 py-[18px] rounded-xl items-center font-bold hidden md:flex")},h(0!==e.price?"Купить":"Об игре"),3)])])])]})),_:1},8,["class","to"])):C("",!0)}}},[["__scopeId","data-v-4488b36d"]]);export{X as _};