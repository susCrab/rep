import{p as e,b as t,u as o,a,r as n}from"./B5Cna7aG.js";import{b as l,l as s,F as r,G as i,H as d,I as c,L as u,V as p,Z as m,W as g,a5 as v}from"./CfmBXBX3.js";const k=e("/assets/img/vk-login-logo.webp"),w={class:"telegram-modal"},_=["innerHTML"],h={key:1,class:"telegram-modal_btn"},b={key:3},f=t({__name:"ModalTelegram",props:{only:{default:!1,type:Boolean},onlyvk:{default:!1,type:Boolean},coins:{type:Boolean,default:!1}},setup(e){const t=e,f=n(),y=o(),I=a(),C=l(!1);f("https://id.kupikod.com/",!0),I.closeModalQuery();const U=s((()=>y.dublicate)),T=s((()=>C.value?C.value:t.coins?"Авторизуйтесь, чтобы получать до 8% КупиБонусами за пополнение КупиКоинов дополнительно. Ощутите всю мощь нашей бонусной программы!":null==M.value?"Войдите, чтобы получить 50 КупиБонусов на счёт для новых пользователей":"vkontakte"===M.value?'Привяжи Telegram, подпишись на наш <a target="_blank" href="https://t.me/steamkupikod">канал</a> и получи ещё 25 КупиБонусов!':"Привяжи Vkontakte и получи ещё 25 КупиБонусов!")),M=s((()=>{var e;return y.user?(null==(e=y.user)?void 0:e.o_auth_accounts.includes("vkontakte"))?"vkontakte":"telegram":null})),R=window.location.search.replace("?","").split("&").reduce((function(e,t){const o=t.split("=");return e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]),e}),{}),j=!!R.code,S=["/order-status","/international","/bonus-program"],O=()=>{const e=S.includes(window.location.pathname)?`?redirect_url=${encodeURIComponent(window.location.href)}`:j?`?redirect_url=${encodeURIComponent(window.location.origin+"/?view=post-vk")}`:`?redirect_url=${encodeURIComponent(window.location.origin)}`;localStorage.setItem("vk-redirect-url",S.includes(window.location.pathname)?encodeURIComponent(window.location.href):j?encodeURIComponent(window.location.origin+"/?view=post-vk"):encodeURIComponent(window.location.origin));f("https://steam.kupikod.com/backend/api/auth/oauth/redirect/vkontakte"+e)},A=()=>{y.setDuplicate(!1),I.closeModalQuery(),I.closeModal()};return r((()=>{R.gold&&(localStorage.setItem("IS_GOLD_AUTH",JSON.stringify(R.gold)),setTimeout((()=>{y.goldAuth()}),1500));localStorage.getItem("is_referral")&&(C.value="Нужно авторизироваться для получения реферальной ссылки")})),(t,o)=>(i(),d("div",w,[o[3]||(o[3]=c("h1",null,"Авторизация",-1)),e.only||U.value?u("",!0):(i(),d("p",{key:0,innerHTML:T.value},null,8,_)),"telegram"===M.value||U.value||j?u("",!0):(i(),d("div",h,[(i(),p(m("script"),{async:"",src:"https://telegram.org/js/telegram-widget.js?22","data-telegram-login":"steamKUPIKOD_bot","data-size":"large","data-userpic":"false","data-radius":"36","data-onauth":"onTelegramAuth(user)","data-request-access":"write"})),(i(),p(m("script"),{type:"text/javascript"},{default:g((()=>o[0]||(o[0]=[v(' function onTelegramAuth(user) { const event = new CustomEvent("telegram-login", {detail: user}); window.dispatchEvent(event); } ')]))),_:1}))])),e.only||"vkontakte"===M.value||U.value?u("",!0):(i(),d("button",{key:2,onClick:O,class:"vk-modal_btn"},o[1]||(o[1]=[c("img",{src:k,alt:"vk"},null,-1),c("span",null,"Войти через Вконтакте",-1)]))),U.value?(i(),d("div",b,[o[2]||(o[2]=c("div",{class:"modal-danger-text"},[v(" Упс, кажется этот аккаунт уже привязан к чьему-то профилю. Если вы хотите объединить эти аккаунты — напишите "),c("a",{href:"https://t.me/kupikod_bot",target:"_blank"},"в поддержку")],-1)),c("button",{onClick:A,class:"pon-btn"},"Понятно")])):u("",!0)]))}},[["__scopeId","data-v-76feb657"]]),y=Object.freeze(Object.defineProperty({__proto__:null,default:f},Symbol.toStringTag,{value:"Module"}));export{y as M,f as _,k as a};