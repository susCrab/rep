import{_ as a}from"./CjASlAzE.js";import{a as e,_ as l}from"./a9-Lvwl3.js";import{g as s}from"./D1BoCpNp.js";import{b as t,l as i,F as o,H as n,I as u,X as c,W as v,u as r,a5 as d,a3 as m,L as _,J as p,M as k,N as g,O as h,G as b,P as w,ad as f,af as C,V as y}from"./CfmBXBX3.js";import{_ as x,a as F}from"./DWZTmkz9.js";import{u as L,_ as j,a as V}from"./Br1GmVSR.js";import{_ as $}from"./DB1fpVeP.js";import{_ as M}from"./DyLgd7dL.js";import{_ as E}from"./CP7sR8Pq.js";import{V as I}from"./BMjpPOVZ.js";import{b as A,n as S,f as T,j as U,k as Z,u as q,h as B,i as G,r as K}from"./B5Cna7aG.js";import{c as R}from"./DqbRb0VG.js";import{K as W}from"./D4QjonDk.js";const H={class:"orders"},P={key:0,class:"orders_box"},D={class:"back"},J={key:0,class:"back_text"},N={key:1,class:"about"},O={class:"about_user"},X=["src"],z={key:0},Q={key:1},Y={class:"about_balance"},aa={class:"about_connect"},ea={key:2,class:"about about_vk"},la={class:"content"},sa={key:0,class:"back"},ta={key:1,class:"games"},ia={key:0,class:"w-6 h-6 mt-6 ml-auto mr-auto",src:$,alt:"loading"},oa={key:1,class:"games_list"},na=["onClick"],ua=["src"],ca={class:"flex flex-col items-start games_name-container"},va={class:"games_title"},ra={class:"games_review"},da={key:0,class:"flex flex-row items-center"},ma={class:"games_review-positive"},_a={class:"games_review-negative"},pa={class:"games_review-date"},ka={class:"games_prices"},ga={key:0,class:"games_price-old"},ha={class:"games_price-new"},ba={key:0,class:"games_discount"},wa={class:"tab-container"},fa={class:"error"},Ca=["disabled"],ya={class:"modal__success"},xa=A({__name:"order",setup($){S.extend(R);const{$windowWidth:A,$axios:xa}=T(),Fa=U(),La=Z(),ja=q(),Va=B(),$a=L(),Ma=K();G({bodyAttrs:{class:"black-bg"}}),t(0);const Ea=t(!1),Ia=t(!1),Aa=t(100),Sa=t(!1),Ta=t("vk"),Ua=t(!1),Za=t(!1),qa=t(""),Ba=t(!1),Ga=t([]),Ka=i((()=>"/order-status-plati"===Fa.path)),Ra=i((()=>ja.user)),Wa=i((()=>ja.status.loggedIn)),Ha=i((()=>null!=Ra.value.name)),Pa=i((()=>null!=Ra.value.picture)),Da=i((()=>null!=Ra.value.id)),Ja=i((()=>{var a,e;return!(null==(e=null==(a=Ra.value)?void 0:a.o_auth_accounts)?void 0:e.includes("telegram"))})),Na=i((()=>{var a,e;return!(null==(e=null==(a=Ra.value)?void 0:a.o_auth_accounts)?void 0:e.includes("vkontakte"))})),Oa=i((()=>ja.dublicate)),Xa=i((()=>Va.userCurrency&&"unknown"!==Va.userCurrency?Va.userCurrency:"rub")),za=()=>{window.location.assign("/ru-ru/games/top")},Qa=()=>{Ia.value=!0},Ya=a=>{Aa.value=a},ae=async()=>{await $a.setItem(Aa.value.toString()),Ia.value=!1},ee=(a,e)=>100-(a/e*100).toFixed(0),le=async()=>{Za.value=!1,Ua.value=!1,await xa.post("/bonuses/check_post_vk").then((a=>{a.data.message?(qa.value=a.data.message,Ua.value=!0):(Za.value=!0,ja.getUser())})).catch((a=>{qa.value=a.data.message,Ua.value=!0}))},se=()=>{Sa.value=!1,ja.setDuplicate(!1),La.push("orders")},te=()=>{const a=`?redirect_url=${encodeURIComponent(window.location.href)}`;localStorage.setItem("vk-redirect-url",window.location.href),Ma(`https://steam.kupikod.com/backend/api/auth/oauth/redirect/vkontakte${a}`)},ie=a=>{Ta.value=a,Sa.value=!0,"checkVk"===a&&setTimeout((()=>{VK.Widgets.Group("vk_groups",{mode:3,no_cover:1,width:"320",color1:"242328",color2:"FFFFFF",color3:"FFFFFF"},215731237)}),300)},oe=()=>{navigator.clipboard.writeText("Я пополняю Steam через Kupikod https://vk.cc/cp7nfG По ссылке ниже самое быстрое пополнение и гарантия безопасности для аккаунта. Короче, рекомендую, проверено!")};return o((()=>{Ea.value=!0,xa.get("/games",{params:{unavailable:1}}).then((({data:a})=>{var e;Ga.value=null==(e=a.data)?void 0:e.slice(0,6)})).finally((()=>{Ea.value=!1}))})),(t,i)=>{var o,L;const $=a,S=l;return b(),n(g,null,[u("div",H,[Wa.value?(b(),n("div",P,[u("div",D,[c($,{to:{path:"/"}},{default:v((()=>[i[13]||(i[13]=u("span",null,[u("svg",{width:"7",height:"14",viewBox:"0 0 7 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.52608 1.21738C6.81916 1.51008 6.81947 1.98495 6.52677 2.27804L1.81052 7.00035L6.52671 11.7216C6.81944 12.0146 6.81919 12.4895 6.52614 12.7822C6.23309 13.075 5.75822 13.0747 5.46548 12.7817L0.219871 7.53045C-0.0726218 7.23765 -0.0726471 6.76326 0.219814 6.47042L5.46542 1.21806C5.75813 0.924976 6.233 0.924671 6.52608 1.21738Z",fill:"#FFEAEA"})])],-1)),r(A)>645?(b(),n("div",J,"Мои покупки")):_("",!0)])),_:1})]),r(A)<1281?(b(),n("button",{key:0,onClick:Qa,class:"about_use"},[i[14]||(i[14]=d(" Использовать ")),u("div",null,[u("h2",null,m(Ra.value.cashback_amount),1),c(W,{class:"ml-[3px]",green:""})])])):_("",!0),r(A)>=1281?(b(),n("div",N,[u("div",O,[Pa.value?(b(),n("img",{key:0,src:Ra.value.picture,alt:""},null,8,X)):_("",!0),u("div",null,[Ha.value?(b(),n("h1",z,m(Ra.value.name),1)):_("",!0),Da.value?(b(),n("p",Q,"id "+m(Ra.value.id),1)):_("",!0)])]),u("div",Y,[u("div",null,[u("h2",null,m(null==(o=Ra.value)?void 0:o.cashback_amount),1),c(W,{green:""})]),i[15]||(i[15]=u("p",null,"Бонусный баланс",-1)),u("button",{onClick:Qa,class:"about_use"},"Использовать")]),u("div",aa,[i[18]||(i[18]=u("h2",null,"Способы авторизации",-1)),u("div",null,[u("div",{onClick:i[0]||(i[0]=a=>ie(Na.value?"vk":"checkVk")),class:p(["about_connect-link",{"connect-req":Na.value,"check-group":!(null==(L=Ra.value)?void 0:L.vk_sub)}])},i[16]||(i[16]=[u("img",{src:x,alt:"vk"},null,-1)]),2),u("div",{onClick:i[1]||(i[1]=a=>ie("tg")),class:p(["about_connect-link",{"connect-req":Ja.value}])},i[17]||(i[17]=[u("img",{src:F,alt:"tg"},null,-1)]),2)])])])):_("",!0),r(A)>=1281&&!Ka.value?(b(),n("div",ea,[i[20]||(i[20]=u("div",{class:"about_vk_container"},[u("h2",null,"Написать пост в ВК"),u("div",{class:"about_vk_bonus"},[d(" +25 "),u("img",{alt:"profile",class:"about_vk_bonus_img",src:j})])],-1)),u("button",{onClick:i[2]||(i[2]=a=>Ba.value=!0),class:"about_vk_btn"},i[19]||(i[19]=[u("img",{alt:"vk profile",class:"about_vk_image",src:V},null,-1),d("Написать ")]))])):_("",!0)])):_("",!0),u("div",la,[Wa.value||Ka.value?_("",!0):(b(),n("div",sa,[c($,{to:{path:"/"}},{default:v((()=>i[21]||(i[21]=[u("span",null,[u("svg",{width:"7",height:"14",viewBox:"0 0 7 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.52608 1.21738C6.81916 1.51008 6.81947 1.98495 6.52677 2.27804L1.81052 7.00035L6.52671 11.7216C6.81944 12.0146 6.81919 12.4895 6.52614 12.7822C6.23309 13.075 5.75822 13.0747 5.46548 12.7817L0.219871 7.53045C-0.0726218 7.23765 -0.0726471 6.76326 0.219814 6.47042L5.46542 1.21806C5.75813 0.924976 6.233 0.924671 6.52608 1.21738Z",fill:"#FFEAEA"})])],-1),u("div",{class:"back_text"},"К пополнению",-1)]))),_:1})])),k(t.$slots,"default",{},void 0,!0),Ka.value?_("",!0):(b(),n("div",ta,[i[25]||(i[25]=u("h1",{class:"games_mainTitle"},"Покупайте недоступные в РФ игры",-1)),Ea.value?(b(),n("img",ia)):_("",!0),!Ea.value&&Ga.value.length>0?(b(),n("div",oa,[(b(!0),n(g,null,h(Ga.value,(a=>{var e,l,o,c;return b(),n("div",{onClick:e=>(a=>{La.push(`/ru-ru/games/${a.slug}`)})(a),key:a.id,class:"games_item"},[u("img",{class:p([{"games_image-mini":r(A)<=570},"games_image"]),src:null==(e=null==a?void 0:a.external_data)?void 0:e.header_image,alt:"game"},null,10,ua),u("div",ca,[u("h1",va,m(a.name),1),u("div",ra,[(null==(l=a.reviews)?void 0:l.total_reviews)&&r(A)>500?(b(),n("div",da,[u("span",{class:"games_review-score",style:w({color:a.reviews.percent_positive_reviews>39?a.reviews.percent_positive_reviews>69?"#00FF93":"#ffe500":"#FF3E60"})},m(("getTextReview"in t?t.getTextReview:r(s))(a.reviews.percent_positive_reviews,(null==(o=a.reviews)?void 0:o.total_positive)+(null==(c=a.reviews)?void 0:c.total_negative))),5),i[24]||(i[24]=u("div",{class:"games_review-metacritic-vertical"},null,-1)),u("span",ma,[i[22]||(i[22]=u("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[u("path",{d:"M8.59995 4.79995L11.7862 7.83443C12.0261 8.06296 12.4059 8.0537 12.6344 7.81374C12.863 7.57379 12.8537 7.194 12.6137 6.96547L8.41374 2.96547C8.18202 2.74478 7.81788 2.74478 7.58616 2.96547L3.38616 6.96547C3.1462 7.194 3.13694 7.57379 3.36547 7.81374C3.594 8.0537 3.97379 8.06297 4.21375 7.83443L7.39995 4.79995L7.39995 12.6C7.39995 12.9313 7.66858 13.2 7.99995 13.2C8.33132 13.2 8.59995 12.9313 8.59995 12.6L8.59995 4.79995Z",fill:"#00FF93"})],-1)),d(" "+m(a.reviews.total_positive>1e3?`${Math.round(a.reviews.total_positive/1e3)}k`:a.reviews.total_positive),1)]),u("span",_a,[i[23]||(i[23]=u("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[u("path",{d:"M8.59995 11.2L11.7862 8.16557C12.0261 7.93704 12.4059 7.9463 12.6344 8.18626C12.863 8.42621 12.8537 8.806 12.6137 9.03453L8.41374 13.0345C8.18202 13.2552 7.81788 13.2552 7.58616 13.0345L3.38616 9.03453C3.1462 8.806 3.13694 8.42621 3.36547 8.18626C3.594 7.9463 3.97379 7.93703 4.21375 8.16557L7.39995 11.2L7.39995 3.40005C7.39995 3.06868 7.66858 2.80005 7.99995 2.80005C8.33132 2.80005 8.59995 3.06868 8.59995 3.40005L8.59995 11.2Z",fill:"#FF3E60"})],-1)),d(" "+m(a.reviews.total_negative>1e3?`${Math.round(a.reviews.total_negative/1e3)}k`:a.reviews.total_negative),1)])])):_("",!0),u("p",pa," Дата выхода: "+m(a.external_data.release_date.date),1)])]),a.min_price?(b(),n("div",{key:0,class:p([{"mr-[30px]":!(r(A)<500)||0!==ee(a.min_price[Xa.value],a.min_old_price[Xa.value])},"games_price-wrap"])},[u("div",ka,[0!==ee(a.min_price[Xa.value],a.min_old_price[Xa.value])?(b(),n("div",ga,m(a.min_old_price[Xa.value])+"₽ ",1)):_("",!0),u("div",ha,[0!==ee(a.min_price[Xa.value],a.min_old_price[Xa.value])?(b(),n("div",ba," -"+m(ee(a.min_price[Xa.value],a.min_old_price[Xa.value]))+"% ",1)):_("",!0),u("span",null,m(a.min_price[Xa.value])+"₽",1)])])],2)):_("",!0)],8,na)})),128))])):_("",!0)])),!Ea.value&&Ga.value.length>0&&!Ka.value?(b(),n("button",{key:2,onClick:za,class:"games-btn"}," Посмотреть весь каталог ")):_("",!0)])]),c(r(I),{modelValue:Ia.value,"onUpdate:modelValue":i[8]||(i[8]=a=>Ia.value=a),classes:"modal-container","content-class":"modal-content faq-popup"},{default:v((()=>{var a,e,l;return[u("div",{onClick:i[3]||(i[3]=a=>Ia.value=!1),class:"modal__close-faq"},i[26]||(i[26]=[u("img",{src:M,alt:"close"},null,-1)])),i[29]||(i[29]=u("h1",null,"Выберите номинал",-1)),u("p",null,[d(" У вас есть "+m(null==(a=Ra.value)?void 0:a.cashback_amount)+" бонусных баллов, которые вы можете использовать для создания промокода. ",1),i[27]||(i[27]=u("br",null,null,-1)),i[28]||(i[28]=d("1 бонусный балл = 1 ₽ "))]),u("div",wa,[u("div",{onClick:i[4]||(i[4]=a=>Ya(100)),class:p([{"tab-active":100===Aa.value},"tab"])}," 100 ",2),u("div",{onClick:i[5]||(i[5]=a=>Ya(200)),class:p([{"tab-active":200===Aa.value},"tab"])}," 200 ",2),u("div",{onClick:i[6]||(i[6]=a=>Ya(500)),class:p([{"tab-active":500===Aa.value},"tab"])}," 500 ",2),u("div",{onClick:i[7]||(i[7]=a=>Ya(1e3)),class:p([{"tab-active":1e3===Aa.value},"tab"])}," 1000 ",2)]),f(u("div",fa," У вас недостаточно бонусных рублей для генерации этого промокода ",512),[[C,(null==(e=Ra.value)?void 0:e.cashback_amount)<Aa.value]]),u("button",{onClick:ae,disabled:(null==(l=Ra.value)?void 0:l.cashback_amount)<Aa.value}," Сгенерировать промокод ",8,Ca)]})),_:1},8,["modelValue"]),c(r(I),{modelValue:Sa.value,"onUpdate:modelValue":i[10]||(i[10]=a=>Sa.value=a),classes:"modal-container","content-class":"modal-content login-vk"},{default:v((()=>[u("img",{onClick:i[9]||(i[9]=a=>Sa.value=!1),src:M,class:"modal__close",alt:"close"}),"vk"!==Ta.value||Oa.value?_("",!0):(b(),n(g,{key:0},[i[31]||(i[31]=u("h1",null,"Привязать Вконтакте",-1)),i[32]||(i[32]=u("div",{class:"modal-danger-text"},[d(" Внимание! Если ранее вы уже регистрировались через свой аккаунт ВКонтакте на нашем сайте, то вы не сможете привязать его к текущему профилю. Если у вас произошла проблема с авторизацией - обратитесь "),u("a",{href:"https://t.me/kupikod_bot",target:"_blank"},"в поддержку"),d(". ")],-1)),u("button",{onClick:te,class:"vk-modal_btn"},i[30]||(i[30]=[u("img",{src:e,alt:"vk login"},null,-1),u("span",null,"Войти через Вконтакте",-1)]))],64)),"tg"!==Ta.value||Oa.value?_("",!0):(b(),y(S,{key:1,only:""})),Oa.value?(b(),n(g,{key:2},[i[33]||(i[33]=u("h1",null,"Упс",-1)),i[34]||(i[34]=u("div",{class:"modal-danger-text"},[d(" Упс, кажется этот аккаунт уже привязан к чьему-то профилю. Если вы хотите объединить эти аккаунты — напишите "),u("a",{href:"https://t.me/kupikod_bot",target:"_blank"},"в поддержку")],-1)),u("button",{onClick:se,class:"pon-btn"},"Понятно")],64)):_("",!0)])),_:1},8,["modelValue"]),c(r(I),{modelValue:Ba.value,"onUpdate:modelValue":i[12]||(i[12]=a=>Ba.value=a),classes:"modal-container","content-class":"modal-content post-vk"},{default:v((()=>[u("img",{onClick:i[11]||(i[11]=a=>Ba.value=!1),src:M,alt:"close",class:"modal__close"}),i[36]||(i[36]=u("h1",null,"Поделитесь в ВК и получи 25 бонусных рублей.",-1)),u("div",{class:"modal__text",onClick:oe},i[35]||(i[35]=[d(" Я пополняю Steam через Kupikod https://vk.cc/cp7nfG По ссылке ниже самое быстрое пополнение и гарантия безопасности для аккаунта. Короче, рекомендую, проверено! "),u("img",{src:E,alt:"copy",class:"modal__copy"},null,-1)])),i[37]||(i[37]=u("ol",null,[u("li",null,"Скопируйте текст из поля выше."),u("li",null," Опубликуйте запись со скопированным текстом на своей страничке в ВК, привязанной к своему аккаунту. "),u("li",null," Убедитесь, что ваш профиль открыт и виден всем в сети. Без этого мы не сможем проверить пост. "),u("li",null,'Нажмите на кнопку "Проверить пост" и получи +25 КупиБонусов.')],-1)),f(u("div",{class:"modal__error"},m(qa.value),513),[[C,Ua.value]]),f(u("div",ya," Ура! На ваш счёт начислено 25 бонусных рублей. ",512),[[C,Za.value]]),u("button",{class:"modal__button",onClick:le},"Проверить пост")])),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-72a0509c"]]);export{xa as default};